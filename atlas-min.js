(function(e,t){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(n,r,i){e.Atlas=t(e,i,e.jQuery||e.Zepto||e.ender||e.$,e.Handlebars,e._,e.Backbone)})}else if(typeof exports!=="undefined"){var n=require("jQuery"),r=require("Handlebars"),i=require("underscore"),s=require("Backbone");t(e,exports,n,r,i,s)}else{e.Atlas=t(e,{},e.jQuery||e.Zepto||e.ender||e.$,e.Handlebars,e._,e.Backbone)}})(this,function(e,t,n,r,i,s){var o=e.Atlas;t.VERSION="0.2.0";t.$=n;t.Handlebars=r;t._=i;t.Backbone=s;t.Events=s.Events;t.Model=s.Model;t.Collection=s.Collection;t.Router=s.Router;t.history=s.history;t.noConflict=function(){e.Atlas=o;return this};t.template=function(e){return r.compile(n("#"+e+"-template").html())};t.View=s.View.extend({beforeRender:function(e){},onRender:function(e){},renderData:function(e,t){this.$el.html(this.template(e))},serializeData:function(e){return{}},render:function(e){this.beforeRender(e);this.renderData(this.serializeData(e),e);this.onRender(e);return this},debounceInterval:100,debounceRender:i.debounce(function(){return this.render()},this.debounceInterval),beforeClose:function(e){},onClose:function(e){},close:function(e){this.beforeClose(e);this.remove(e);this.onClose(e);return this}});t.ItemView=t.View.extend({model:new s.Model,serializeData:function(e){return this.model.toJSON()}});t.BackView=t.ItemView.extend({handleBackClick:function(){e.history.back()}});t.CollectionView=t.View.extend({collection:new s.Collection,serializeData:function(e){return this.collection.toJSON()}});t.CollectionItemView=t.View.extend({defaults:{collection:new s.Collection,itemView:t.ItemCollectionView,children:[]},clearChildren:function(e){i.each(this.children,function(t,n,r){t.close(e)})},renderData:function(e,t){this.clearChildren(t);var n=this;this.$el.html(this.template(e));this.collection.each(function(e,r,i){var s=new n.itemView({model:e});s.render(t);n.$el.append(s.$el)})},close:function(e){this.beforeClose(e);this.clearChildren(e);this.remove(e);this.onClose(e);return this}});t.Region=s.View.extend({showView:function(e,t){if(this.view){this.view.close(t)}this.view=e;this.view.render(t);this.$el.append(this.view.$el);return this}});return t})