!function(e,n){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,i,o){e.Atlas=n(e,o,e.jQuery||e.Zepto||e.ender||e.$,e.Handlebars,e._,e.Backbone)});else if("undefined"!=typeof exports){var t=require("jQuery"),i=require("Handlebars"),o=require("underscore"),r=require("Backbone");n(e,exports,t,i,o,r)}else e.Atlas=n(e,{},e.jQuery||e.Zepto||e.ender||e.$,e.Handlebars,e._,e.Backbone)}(this,function(e,n,t,i,o,r){var l=e.Atlas;return n.VERSION="0.2.5",n.$=t,n.Handlebars=i,n._=o,n.Backbone=r,n.Events=r.Events,n.Model=r.Model,n.Collection=r.Collection,n.Router=r.Router,n.history=r.history,n.noConflict=function(){return e.Atlas=l,this},n.template=function(e){return i.compile(t("#"+e+"-template").html())},n.View=r.View.extend({beforeRender:function(){},onRender:function(){},renderData:function(e){this.$el.html(this.template(e))},serializeData:function(){return{}},render:function(e){return this.beforeRender(e),this.renderData(this.serializeData(e),e),this.onRender(e),this},debounceInterval:100,debounceRender:o.debounce(function(e){return this.render(e)},this.debounceInterval),beforeClose:function(){},onClose:function(){},close:function(e){return this.beforeClose(e),this.remove(e),this.onClose(e),this},handleBackClick:function(){e.history.back()}}),n.ItemView=n.View.extend({model:new r.Model,serializeData:function(){return this.model.toJSON()}}),n.CollectionView=n.View.extend({collection:new r.Collection,serializeData:function(){return this.collection.toJSON()}}),n.CollectionItemView=n.View.extend({collection:new r.Collection,itemView:n.ItemCollectionView,children:[],clearChildren:function(e){o.each(this.children,function(n){n.close(e)})},renderData:function(e,n){this.clearChildren(n);var t=this;this.$el.html(this.template(e)),this.collection.each(function(e){var i=new t.itemView({model:e});i.render(n),t.children.push(i),t.$el.append(i.$el)})},close:function(e){return this.beforeClose(e),this.clearChildren(e),this.remove(e),this.onClose(e),this}}),n.Region=r.View.extend({showView:function(e,n){return this.view&&this.view.close(n),this.view=e,this.view.render(n),this.$el.append(this.view.$el),this}}),n});