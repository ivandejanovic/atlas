!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Atlas=b(a,e,a.jQuery||a.Zepto||a.ender||a.$,a._,a.Backbone)});else if("undefined"!=typeof exports){var c=require("jQuery"),d=require("underscore"),e=require("Backbone");b(a,exports,c,d,e)}else a.Atlas=b(a,{},a.jQuery||a.Zepto||a.ender||a.$,a._,a.Backbone)}(this,function(a,b,c,d,e){"use strict";var f=a.Atlas;return b.VERSION="0.3.0",b.$=c,b._=d,b.Backbone=e,b.Events=e.Events,b.Model=e.Model,b.Collection=e.Collection,b.Router=e.Router,b.history=e.history,b.noConflict=function(){return a.Atlas=f,this},b.templateFactory=function(a){return d.template(c("#"+a+"-template").html())},b.View=e.View.extend({beforeRender:function(a){},onRender:function(a){},renderData:function(a,b){this.$el.html(this.template(a))},serializeData:function(a){return{data:{}}},render:function(a){return this.beforeRender(a),this.renderData(this.serializeData(a),a),this.onRender(a),this},debounceInterval:100,debounceRender:d.debounce(function(a){return this.render(a)},this.debounceInterval),beforeClose:function(a){},onClose:function(a){},close:function(a){return this.beforeClose(a),this.remove(a),this.onClose(a),this},handleBackClick:function(){a.history.back()}}),b.ItemView=b.View.extend({model:new e.Model,serializeData:function(a){return{data:this.model.toJSON()}}}),b.CollectionView=b.View.extend({collection:new e.Collection,serializeData:function(a){return{data:this.collection.toJSON()}}}),b.CollectionItemView=b.View.extend({collection:new e.Collection,itemView:b.ItemView,children:[],clearChildren:function(a){d.each(this.children,function(b,c,d){b.close(a)})},createChildView:function(a,b){return new this.itemView({model:a})},renderData:function(a,b){this.clearChildren(b);var c=this;this.$el.html(this.template(a)),this.collection.each(function(a,d,e){var f=c.createChildView(a,b);f.render(b),c.children.push(f),c.$el.append(f.$el)})},close:function(a){return this.beforeClose(a),this.clearChildren(a),this.remove(a),this.onClose(a),this}}),b.Region=e.View.extend({showView:function(a,b){return this.view&&this.view.close(b),this.view=a,this.view.render(b),this.$el.append(this.view.$el),this}}),b});